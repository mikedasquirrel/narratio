<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Betting System{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    {% block extra_head %}{% endblock %}
</head>
<body>
    <!-- Animated Wave Background -->
    <div class="wave-background">
        <div class="wave-layer"></div>
        <div class="wave-layer"></div>
        <div class="wave-layer"></div>
    </div>

    <!-- Betting-Only Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/betting" class="nav-logo">
                <span class="nav-text">narrative betting system</span>
            </a>
            <ul class="nav-links">
                <li><a href="/betting" class="nav-link">home</a></li>
                <li><a href="/betting/dashboard" class="nav-link">dashboard</a></li>
                <li><a href="/betting/live" class="nav-link">live</a></li>
                
                <!-- Sports -->
                <li class="nav-dropdown">
                    <a href="#" class="nav-link dropdown-trigger">sports ▾</a>
                    <div class="dropdown-menu">
                        <a href="/nhl" class="dropdown-item">NHL (69.4% win, 32.5% ROI)</a>
                        <a href="/nfl" class="dropdown-item">NFL (66.7% win, 27.3% ROI)</a>
                        <a href="/nba" class="dropdown-item">NBA (54.5% win, 7.6% ROI)</a>
                    </div>
                </li>
                
                <!-- Analysis -->
                <li class="nav-dropdown">
                    <a href="#" class="nav-link dropdown-trigger">analysis ▾</a>
                    <div class="dropdown-menu">
                        <a href="/nhl/validation" class="dropdown-item">validation results</a>
                        <a href="/nhl/patterns" class="dropdown-item">betting patterns</a>
                        <a href="/betting/performance" class="dropdown-item">performance tracking</a>
                    </div>
                </li>
                
                <!-- Resources -->
                <li class="nav-dropdown">
                    <a href="#" class="nav-link dropdown-trigger">resources ▾</a>
                    <div class="dropdown-menu">
                        <a href="/betting/methodology" class="dropdown-item">methodology</a>
                        <a href="/betting/risk-management" class="dropdown-item">risk management</a>
                        <a href="/betting/education" class="dropdown-item">education</a>
                        <a href="/investor" class="dropdown-item">investor materials</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <main class="container">
        {% block content %}{% endblock %}
    </main>

    <footer>
        <p>Narrative Betting System — Production-validated sports betting | NHL • NFL • NBA</p>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        // Navbar scroll effect
        const navbar = document.querySelector('.navbar');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Add active class to current nav link
        const currentPath = window.location.pathname;
        document.querySelectorAll('.nav-link').forEach(link => {
            if (link.getAttribute('href') === currentPath) {
                link.classList.add('active');
            }
        });

        // Dropdown menu handling
        document.querySelectorAll('.nav-dropdown').forEach(dropdown => {
            const trigger = dropdown.querySelector('.dropdown-trigger');
            const menu = dropdown.querySelector('.dropdown-menu');
            
            // Toggle dropdown on click
            trigger.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                
                // Close other dropdowns
                document.querySelectorAll('.nav-dropdown').forEach(other => {
                    if (other !== dropdown) {
                        other.classList.remove('active');
                    }
                });
                
                dropdown.classList.toggle('active');
            });
            
            // Show dropdown on hover (desktop)
            dropdown.addEventListener('mouseenter', () => {
                if (window.innerWidth > 768) {
                    dropdown.classList.add('active');
                }
            });
            
            dropdown.addEventListener('mouseleave', () => {
                if (window.innerWidth > 768) {
                    dropdown.classList.remove('active');
                }
            });
        });

        // Close dropdowns when clicking outside
        document.addEventListener('click', () => {
            document.querySelectorAll('.nav-dropdown').forEach(dropdown => {
                dropdown.classList.remove('active');
            });
        });
    </script>
    {% block extra_scripts %}{% endblock %}
</body>
</html>

