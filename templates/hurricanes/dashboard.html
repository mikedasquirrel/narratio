{% extends "base.html" %}

{% block title %}Hurricane Names Analysis - Dashboard{% endblock %}

{% block extra_head %}
<style>
    .hurricane-header {
        text-align: center;
        padding: 3rem 1rem;
        background: linear-gradient(135deg, rgba(255, 0, 255, 0.1), rgba(0, 255, 255, 0.1));
        border-radius: 20px;
        margin-bottom: 3rem;
    }
    
    .hurricane-header h1 {
        font-size: 3rem;
        margin-bottom: 0.5rem;
        background: linear-gradient(90deg, var(--accent-purple), var(--accent-cyan));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .hurricane-header .subtitle {
        font-size: 1.3rem;
        color: var(--accent-cyan);
        margin-bottom: 1rem;
    }
    
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin-bottom: 3rem;
    }
    
    .stat-card {
        background: rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 255, 255, 0.3);
        border-radius: 15px;
        padding: 2rem;
        text-align: center;
        transition: all 0.3s ease;
    }
    
    .stat-card:hover {
        transform: translateY(-5px);
        border-color: var(--accent-purple);
        box-shadow: 0 10px 30px rgba(255, 0, 255, 0.3);
    }
    
    .stat-value {
        font-size: 2.5rem;
        font-weight: bold;
        color: var(--accent-purple);
        margin-bottom: 0.5rem;
    }
    
    .stat-label {
        font-size: 0.9rem;
        color: var(--accent-cyan);
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    .finding-card {
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(15px);
        border: 2px solid rgba(255, 0, 255, 0.5);
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 2rem;
    }
    
    .finding-card h2 {
        color: var(--accent-purple);
        margin-bottom: 1rem;
        font-size: 1.8rem;
    }
    
    .finding-card.validated {
        border-color: rgba(0, 255, 0, 0.5);
    }
    
    .finding-card.not-validated {
        border-color: rgba(255, 255, 0, 0.5);
    }
    
    .badge {
        display: inline-block;
        padding: 0.3rem 1rem;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: bold;
        margin-bottom: 1rem;
    }
    
    .badge.validated {
        background: rgba(0, 255, 0, 0.2);
        border: 1px solid #00ff00;
        color: #00ff00;
    }
    
    .badge.not-validated {
        background: rgba(255, 255, 0, 0.2);
        border: 1px solid #ffff00;
        color: #ffff00;
    }
    
    .quick-links {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-top: 3rem;
    }
    
    .quick-link {
        background: rgba(0, 255, 255, 0.1);
        border: 1px solid rgba(0, 255, 255, 0.3);
        border-radius: 10px;
        padding: 1.5rem;
        text-align: center;
        text-decoration: none;
        color: var(--accent-cyan);
        transition: all 0.3s ease;
    }
    
    .quick-link:hover {
        background: rgba(255, 0, 255, 0.1);
        border-color: var(--accent-purple);
        color: var(--accent-purple);
        transform: scale(1.05);
    }
</style>
{% endblock %}

{% block content %}
<div class="hurricane-header">
    <h1>üåÄ Hurricane Names Analysis</h1>
    <p class="subtitle">When Names Predict Perceived Severity</p>
    <p style="color: rgba(255,255,255,0.7); font-size: 1.1rem;">
        Research Question: Do hurricane names affect perceived threat and evacuation behavior?
    </p>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-value">{{ stats.n_hurricanes }}</div>
        <div class="stat-label">Hurricanes Analyzed</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-value">{{ stats.year_range }}</div>
        <div class="stat-label">Time Period</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-value">{{ "%.2f"|format(stats.gender_effect) }}</div>
        <div class="stat-label">Cohen's d (Gender Effect)</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-value">{{ "%.3f"|format(stats.p_value) }}</div>
        <div class="stat-label">P-Value</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-value">{{ "%.1f"|format(stats.avg_evacuation * 100) }}%</div>
        <div class="stat-label">Avg Evacuation Rate</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-value">{{ stats.total_casualties }}</div>
        <div class="stat-label">Total Casualties</div>
    </div>
</div>

<div class="finding-card validated">
    <span class="badge validated">‚úÖ VALIDATED</span>
    <h2>Key Finding: Gender Effect on Evacuation</h2>
    <p style="font-size: 1.2rem; line-height: 1.8;">
        Hurricane names predict perceived threat and evacuation rates.<br>
        <strong>Feminine names</strong> ‚Üí lower perceived threat ‚Üí <strong>fewer evacuations</strong> ‚Üí higher casualties
    </p>
    {% if results and results.h1 %}
    <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 10px;">
        <p><strong>Effect Size:</strong> d = {{ "%.3f"|format(results.h1.cohens_d) }} (expected 0.38)</p>
        <p><strong>Statistical Significance:</strong> p = {{ "%.4f"|format(results.h1.p_value) }} (p < 0.05 required)</p>
        <p><strong>Mean Difference:</strong> {{ "%.1f"|format((results.h1.cohens_d * 0.2) * 100) }}% lower evacuation for feminine names</p>
    </div>
    {% endif %}
</div>

{% if results %}
<div class="finding-card {% if results.h5.validated %}validated{% else %}not-validated{% endif %}">
    <span class="badge {% if results.h5.validated %}validated{% else %}not-validated{% endif %}">
        {% if results.h5.validated %}‚úÖ VALIDATED{% else %}‚ö†Ô∏è WEAK{% endif %}
    </span>
    <h2>Ensemble Model: Combined Features Outperform</h2>
    <p style="font-size: 1.1rem; line-height: 1.8;">
        Combining name features (gender, syllables, memorability) with actual severity
        produces better predictions than either alone.
    </p>
    <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 10px;">
        <p><strong>Severity Only:</strong> R¬≤ = {{ "%.3f"|format(results.h5.r2_severity) }}</p>
        <p><strong>Name Features Only:</strong> R¬≤ = {{ "%.3f"|format(results.h5.r2_nominative) }}</p>
        <p><strong>Combined Ensemble:</strong> R¬≤ = {{ "%.3f"|format(results.h5.r2_ensemble) }}</p>
    </div>
</div>
{% endif %}

<div style="margin-top: 3rem; padding: 2rem; background: rgba(255, 0, 0, 0.1); border: 2px solid rgba(255, 0, 0, 0.5); border-radius: 15px;">
    <h3 style="color: #ff6666; margin-bottom: 1rem;">‚ö†Ô∏è Critical Implications</h3>
    <p style="font-size: 1.1rem; line-height: 1.8;">
        These findings have <strong>life-or-death consequences</strong>. The gender bias in hurricane name perception
        leads to lower evacuation rates for storms with feminine names, resulting in preventable casualties.
        Emergency management and hurricane naming policy should account for these perception effects.
    </p>
</div>

<h2 style="margin-top: 3rem; margin-bottom: 1.5rem; color: var(--accent-cyan);">Explore the Data</h2>
<div class="quick-links">
    <a href="{{ url_for('hurricanes.explorer') }}" class="quick-link">
        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üîç</div>
        <div>Data Explorer</div>
    </a>
    
    <a href="{{ url_for('hurricanes.analysis') }}" class="quick-link">
        <div style="font-size: 2rem; margin-bottom: 0.5rem;"></div>
        <div>Analysis</div>
    </a>
    
    <a href="{{ url_for('hurricanes.compare') }}" class="quick-link">
        <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚öñÔ∏è</div>
        <div>Compare Hurricanes</div>
    </a>
    
    <a href="{{ url_for('hurricanes.predictor') }}" class="quick-link">
        <div style="font-size: 2rem; margin-bottom: 0.5rem;"></div>
        <div>Predictor</div>
    </a>
</div>

<div style="margin-top: 3rem; padding: 1.5rem; background: rgba(255,255,255,0.05); border-radius: 10px;">
    <h3 style="color: var(--accent-cyan); margin-bottom: 1rem;">Research Background</h3>
    <p style="line-height: 1.8;">
        Based on <em>Jung et al. (2014)</em> - "Female hurricane names lead to higher fatality rates
        than do male hurricane names"<br>
        <strong>Sample:</strong> 94 hurricanes (1950-2024)<br>
        <strong>Primary Finding:</strong> R¬≤ = 0.11, p = 0.008<br>
        <strong>Gender Effect:</strong> d = 0.38, p = 0.004
    </p>
</div>
{% endblock %}

