{% extends "base.html" %}

{% block title %}API Documentation - Universal Narrative Analyzer{% endblock %}

{% block extra_css %}
<style>
    body {
        background: #f8f9fa;
    }
    
    .api-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 40px 20px;
    }
    
    .api-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 60px 40px;
        border-radius: 20px;
        margin-bottom: 40px;
        text-align: center;
    }
    
    .api-title {
        font-size: 3rem;
        font-weight: 800;
        margin-bottom: 15px;
    }
    
    .api-section {
        background: white;
        border-radius: 20px;
        padding: 40px;
        margin-bottom: 30px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
    }
    
    .section-title {
        font-size: 2rem;
        font-weight: 700;
        color: #333;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 3px solid #667eea;
    }
    
    .endpoint {
        background: #f8f9fa;
        border-left: 4px solid #667eea;
        padding: 25px;
        margin: 20px 0;
        border-radius: 8px;
    }
    
    .method {
        display: inline-block;
        background: #667eea;
        color: white;
        padding: 6px 16px;
        border-radius: 6px;
        font-weight: 700;
        font-size: 0.9rem;
        margin-right: 15px;
    }
    
    .method.get { background: #4caf50; }
    .method.post { background: #ff9800; }
    
    .endpoint-path {
        font-family: 'Monaco', 'Courier New', monospace;
        font-size: 1.1rem;
        font-weight: 600;
        color: #333;
    }
    
    .code-block {
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 20px;
        border-radius: 12px;
        overflow-x: auto;
        font-family: 'Monaco', 'Courier New', monospace;
        font-size: 0.9rem;
        line-height: 1.6;
        margin: 15px 0;
    }
    
    .code-comment {
        color: #6a9955;
    }
    
    .code-string {
        color: #ce9178;
    }
    
    .code-number {
        color: #b5cea8;
    }
    
    .code-keyword {
        color: #569cd6;
    }
    
    .param-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
    }
    
    .param-table th {
        background: #667eea;
        color: white;
        padding: 12px;
        text-align: left;
        font-weight: 600;
    }
    
    .param-table td {
        padding: 12px;
        border-bottom: 1px solid #e0e0e0;
    }
    
    .param-table tr:hover {
        background: #f8f9fa;
    }
    
    .required {
        background: #f44336;
        color: white;
        padding: 3px 8px;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: 700;
    }
    
    .optional {
        background: #4caf50;
        color: white;
        padding: 3px 8px;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: 700;
    }
    
    .response-example {
        background: #f8f9fa;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        padding: 20px;
        margin: 15px 0;
    }
    
    .try-it-button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 15px 40px;
        border-radius: 50px;
        font-weight: 700;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s;
        display: inline-block;
        text-decoration: none;
        margin-top: 20px;
    }
    
    .try-it-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }
    
    .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 30px 0;
    }
    
    .feature-item {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 12px;
        border-left: 4px solid #667eea;
    }
    
    .feature-title {
        font-weight: 700;
        color: #333;
        margin-bottom: 8px;
    }
    
    .feature-desc {
        color: #666;
        font-size: 0.95rem;
        line-height: 1.5;
    }
</style>
{% endblock %}

{% block content %}
<div class="api-container">
    <div class="api-header">
        <h1 class="api-title">üìñ API Documentation</h1>
        <p style="font-size: 1.3rem; opacity: 0.9; margin-top: 15px;">
            Integrate narrative analysis into your applications
        </p>
    </div>
    
    <!-- Quick Start -->
    <div class="api-section">
        <h2 class="section-title">üöÄ Quick Start</h2>
        <p style="color: #666; margin-bottom: 20px; font-size: 1.1rem;">
            Get started with the Universal Narrative Analyzer API in minutes
        </p>
        
        <div class="code-block">
<span class="code-comment"># Python example</span>
<span class="code-keyword">import</span> requests

url = <span class="code-string">"http://127.0.0.1:5738/analyze/api/analyze"</span>
payload = {
    <span class="code-string">"text"</span>: <span class="code-string">"Your narrative here..."</span>
}

response = requests.<span class="code-keyword">post</span>(url, json=payload)
results = response.json()

<span class="code-keyword">print</span>(<span class="code-string">f"Quality Score: {results['narrative_quality']['overall']}"</span>)
        </div>
        
        <div class="code-block">
<span class="code-comment">// JavaScript example</span>
<span class="code-keyword">const</span> response = <span class="code-keyword">await</span> fetch(<span class="code-string">'/analyze/api/analyze'</span>, {
    method: <span class="code-string">'POST'</span>,
    headers: { <span class="code-string">'Content-Type'</span>: <span class="code-string">'application/json'</span> },
    body: JSON.stringify({ text: <span class="code-string">'Your narrative here...'</span> })
});

<span class="code-keyword">const</span> data = <span class="code-keyword">await</span> response.json();
console.log(<span class="code-string">'Quality Score:'</span>, data.narrative_quality.overall);
        </div>
    </div>
    
    <!-- Endpoints -->
    <div class="api-section">
        <h2 class="section-title">üì° Endpoints</h2>
        
        <!-- POST /analyze -->
        <div class="endpoint">
            <span class="method post">POST</span>
            <span class="endpoint-path">/analyze/api/analyze</span>
            <p style="color: #666; margin-top: 15px; font-size: 1.05rem;">
                Analyze a narrative and return comprehensive insights
            </p>
        </div>
        
        <h3 style="margin-top: 30px; color: #333;">Request Parameters</h3>
        <table class="param-table">
            <thead>
                <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Required</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>text</code></td>
                    <td>string</td>
                    <td><span class="required">REQUIRED</span></td>
                    <td>The narrative to analyze (50-10,000 characters)</td>
                </tr>
                <tr>
                    <td><code>context</code></td>
                    <td>object</td>
                    <td><span class="optional">OPTIONAL</span></td>
                    <td>Additional context (domain hint, metadata)</td>
                </tr>
            </tbody>
        </table>
        
        <h3 style="margin-top: 30px; color: #333;">Response Format</h3>
        <div class="code-block">
{
    <span class="code-string">"success"</span>: <span class="code-keyword">true</span>,
    <span class="code-string">"narrative_quality"</span>: {
        <span class="code-string">"overall"</span>: <span class="code-number">0.72</span>,
        <span class="code-string">"percentile"</span>: <span class="code-number">78</span>,
        <span class="code-string">"complexity"</span>: <span class="code-number">0.65</span>,
        <span class="code-string">"richness"</span>: <span class="code-number">0.68</span>,
        <span class="code-string">"variation"</span>: <span class="code-number">0.45</span>,
        <span class="code-string">"peak_strength"</span>: <span class="code-number">0.89</span>
    },
    <span class="code-string">"domain_predictions"</span>: [
        {
            <span class="code-string">"domain"</span>: <span class="code-string">"startups"</span>,
            <span class="code-string">"domain_name"</span>: <span class="code-string">"Startup Funding"</span>,
            <span class="code-string">"probability"</span>: <span class="code-number">0.82</span>,
            <span class="code-string">"percentile"</span>: <span class="code-number">82</span>,
            <span class="code-string">"success_verdict"</span>: <span class="code-string">"Very Likely"</span>,
            <span class="code-string">"explanation"</span>: <span class="code-string">"Narrative has moderate influence..."</span>
        }
    ],
    <span class="code-string">"patterns"</span>: [...],
    <span class="code-string">"recommendations"</span>: [...],
    <span class="code-string">"archetypes"</span>: [...],
    <span class="code-string">"feature_breakdown"</span>: {...},
    <span class="code-string">"text_stats"</span>: {...}
}
        </div>
    </div>
    
    <!-- Features -->
    <div class="api-section">
        <h2 class="section-title">‚ú® What You Get</h2>
        
        <div class="feature-grid">
            <div class="feature-item">
                <div class="feature-title">üéØ Quality Score</div>
                <div class="feature-desc">0-100 score with percentile ranking and component breakdown</div>
            </div>
            
            <div class="feature-item">
                <div class="feature-title">üåê Cross-Domain Predictions</div>
                <div class="feature-desc">Success probability in 10 different domains</div>
            </div>
            
            <div class="feature-item">
                <div class="feature-title">üé≠ Pattern Detection</div>
                <div class="feature-desc">8 universal patterns (Hero, Underdog, Rivalry, etc.)</div>
            </div>
            
            <div class="feature-item">
                <div class="feature-title">üí° Recommendations</div>
                <div class="feature-desc">Actionable suggestions to improve narrative quality</div>
            </div>
            
            <div class="feature-item">
                <div class="feature-title">üë• Archetype Matching</div>
                <div class="feature-desc">Classic character archetypes with match scores</div>
            </div>
            
            <div class="feature-item">
                <div class="feature-title">üìä Feature Analysis</div>
                <div class="feature-desc">200+ features extracted and analyzed</div>
            </div>
        </div>
    </div>
    
    <!-- Rate Limits -->
    <div class="api-section">
        <h2 class="section-title">‚ö° Performance & Limits</h2>
        
        <table class="param-table">
            <thead>
                <tr>
                    <th>Metric</th>
                    <th>Value</th>
                    <th>Notes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Response Time</td>
                    <td>2-5 seconds</td>
                    <td>Depends on text length</td>
                </tr>
                <tr>
                    <td>Min Text Length</td>
                    <td>50 characters</td>
                    <td>Required for meaningful analysis</td>
                </tr>
                <tr>
                    <td>Max Text Length</td>
                    <td>10,000 characters</td>
                    <td>~1,500-2,000 words</td>
                </tr>
                <tr>
                    <td>Rate Limit</td>
                    <td>Unlimited (dev)</td>
                    <td>Production: TBD</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <!-- Use Cases -->
    <div class="api-section">
        <h2 class="section-title">üíº Use Cases</h2>
        
        <div class="feature-grid">
            <div class="feature-item">
                <div class="feature-title">Content Creation</div>
                <div class="feature-desc">Analyze drafts before publishing, optimize for engagement</div>
            </div>
            
            <div class="feature-item">
                <div class="feature-title">Startup Pitches</div>
                <div class="feature-desc">Evaluate pitch quality, identify weak narrative areas</div>
            </div>
            
            <div class="feature-item">
                <div class="feature-title">Sports Analysis</div>
                <div class="feature-desc">Preview generation, matchup narrative scoring</div>
            </div>
            
            <div class="feature-item">
                <div class="feature-title">Academic Research</div>
                <div class="feature-desc">Narrative structure analysis, pattern identification</div>
            </div>
            
            <div class="feature-item">
                <div class="feature-title">Marketing Copy</div>
                <div class="feature-desc">Test messaging effectiveness, A/B test narratives</div>
            </div>
            
            <div class="feature-item">
                <div class="feature-title">Personal Branding</div>
                <div class="feature-desc">Optimize bios, profiles, and personal statements</div>
            </div>
        </div>
    </div>
    
    <!-- Try It -->
    <div style="text-align: center; margin: 60px 0;">
        <h2 style="font-size: 2rem; margin-bottom: 20px; color: #333;">Ready to Get Started?</h2>
        <a href="/analyze" class="try-it-button">üöÄ Try It Now</a>
        <a href="/analyze/compare" class="try-it-button" style="margin-left: 15px; background: white; color: #667eea; border: 2px solid #667eea;">
            ‚öñÔ∏è Compare Mode
        </a>
    </div>
</div>
{% endblock %}

